!function(){"use strict";function t(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}function e(e,n){var o="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!o){if(Array.isArray(e)||(o=function(e,n){if(e){if("string"==typeof e)return t(e,n);var o={}.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?t(e,n):void 0}}(e))||n&&e&&"number"==typeof e.length){o&&(e=o);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,l=!0,u=!1;return{s:function(){o=o.call(e)},n:function(){var t=o.next();return l=t.done,t},e:function(t){u=!0,r=t},f:function(){try{l||null==o.return||o.return()}finally{if(u)throw r}}}}function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}var o;function i(){window.__spatialNavigation__&&(window.__spatialNavigation__.keyMode="ARROW");var t=document.createElement("style");t.textContent="\n    *:focus {\n      outline: 3px solid #0066ff !important;\n      outline-offset: 2px !important;\n    }\n  ",document.head.appendChild(t)}o||(o=1,function(){if(!("navigate"in window)){var t={37:"left",38:"up",39:"right",40:"down"},o=null,i=null,a={element:null,rect:null},r=null;window.navigate=u,window.Element.prototype.spatialNavigationSearch=f,window.Element.prototype.focusableAreas=v,window.Element.prototype.getSpatialNavigationContainer=w,window.CSS&&CSS.registerProperty&&(""===window.getComputedStyle(document.documentElement).getPropertyValue("--spatial-navigation-contain")&&CSS.registerProperty({name:"--spatial-navigation-contain",syntax:"auto | contain",inherits:!1,initialValue:"auto"}),""===window.getComputedStyle(document.documentElement).getPropertyValue("--spatial-navigation-action")&&CSS.registerProperty({name:"--spatial-navigation-action",syntax:"auto | focus | scroll",inherits:!1,initialValue:"auto"}),""===window.getComputedStyle(document.documentElement).getPropertyValue("--spatial-navigation-function")&&CSS.registerProperty({name:"--spatial-navigation-function",syntax:"normal | grid",inherits:!1,initialValue:"normal"})),G(!1),window.addEventListener("load",()=>{l()})}function l(){window.addEventListener("keydown",e=>{var n=parent&&parent.__spatialNavigation__.keyMode||window.__spatialNavigation__.keyMode,a=document.activeElement,r=t[e.keyCode];if(9===e.keyCode&&(i=null),!(!n||"NONE"===n||"SHIFTARROW"===n&&!e.shiftKey||"ARROW"===n&&e.shiftKey||e.defaultPrevented)){var l={left:!0,up:!0,right:!0,down:!0};"INPUT"!==a.nodeName&&"TEXTAREA"!==a.nodeName||(l=function(e){var n=["email","date","month","number","time","week"],o=["password","text","search","tel","url",null],i=document.activeElement,a={left:!1,up:!1,right:!1,down:!1},r=t[e.keyCode];if(void 0===r)return a;if(!n.includes(i.getAttribute("type"))||"up"!==r&&"down"!==r)if(o.includes(i.getAttribute("type"))||"TEXTAREA"===i.nodeName){var l=i.selectionStart,u=i.selectionEnd;l===u&&(0===l&&(a.left=!0,a.up=!0),u===i.value.length&&(a.right=!0,a.down=!0))}else a[r]=!0;else a[r]=!0;return a}(e)),l[r]&&(e.preventDefault(),o=new Map,u(r),o=null,i=null)}}),document.addEventListener("mouseup",t=>{i={x:t.clientX,y:t.clientY}}),window.addEventListener("focusin",t=>{t.target!==window&&(a.element=t.target,a.rect=t.target.getBoundingClientRect())})}function u(t){var e=function(){var t=document.activeElement;if(!t||t===document.body&&!document.querySelector(":focus")){if(a.element&&t!==a.element){var e=window.getComputedStyle(a.element,null),n=["hidden","collapse"];if(a.element.disabled||n.includes(e.getPropertyValue("visibility")))return t=a.element}t=document.documentElement}if(!a.element||0!==$(a.element).height&&0!==$(a.element).width||(r=a.rect),!I(t)){var o=y(t);if(o&&(o===window||"auto"===N(o)))return o}return t}(),n=e,o=null;i&&(null===(o=document.elementFromPoint(i.x,i.y))&&(o=document.body),R(o)&&!S(o)?i=null:n=S(o)?o:o.getSpatialNavigationContainer()),n!==document&&n!==document.documentElement||(n=document.body||document.documentElement);var l=null;if((S(n)||"BODY"===n.nodeName)&&"INPUT"!==n.nodeName)if("IFRAME"===n.nodeName&&(n=n.contentDocument.documentElement),l=n,document.activeElement===e||document.activeElement===document.body&&e===document.documentElement){if("scroll"===N(n)){if(d(n,t))return}else if("focus"===N(n)){if(c(n.spatialNavigationSearch(t,{container:n,candidates:m(n,{mode:"all"})}),t))return}else if("auto"===N(n)&&(c(n.spatialNavigationSearch(t,{container:n}),t)||d(n,t)))return}else l=l.getSpatialNavigationContainer();var u=(l=n.getSpatialNavigationContainer()).parentElement?l.getSpatialNavigationContainer():null;if(u||window.location===window.parent.location||(u=window.parent.document.documentElement),"scroll"===N(l)){if(d(l,t))return}else"focus"===N(l)?x(n,l,u,t,"all"):"auto"===N(l)&&x(n,l,u,t,"visible")}function c(t,e){if(t){if(!b("beforefocus",t,null,e))return!0;var n=t.getSpatialNavigationContainer();return n!==window&&"focus"===N(n)?t.focus():t.focus({preventScroll:!0}),i=null,!0}return!1}function d(t,e){return A(t,e)&&!k(t,e)?(P(t,e),!0):!t.parentElement&&!T(t,e)&&(P(t.ownerDocument.documentElement,e),!0)}function m(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{mode:"visible"},o=[];if(t.childElementCount>0){t.parentElement||(t=t.getElementsByTagName("body")[0]||document.body);var i,a=e(t.children);try{for(a.s();!(i=a.n()).done;){var r=i.value;C(r)?o.push(r):R(r)?(o.push(r),!S(r)&&r.childElementCount&&(o=o.concat(m(r,{mode:"all"})))):r.childElementCount&&(o=o.concat(m(r,{mode:"all"})))}}catch(t){a.e(t)}finally{a.f()}}return"all"===n.mode?o:o.filter(O)}function s(t,e,n,o){var i=t;return o=o||i.getSpatialNavigationContainer(),g(i,n=!n||n.length<=0?m(o):n,e,o)}function f(t,e){var n,o=this,a=[],l=[],u=function(t){var e=t.getSpatialNavigationContainer(),n=e.focusableAreas(),o=[];return n.forEach(e=>{t!==e&&D(e,t)&&o.push(e)}),o}(o);e||(e={});var c=o.getSpatialNavigationContainer(),d=m(c),f=e.container||c;e.container&&c.contains(e.container)&&(d=d.concat(m(f)));var g=e.candidates&&e.candidates.length>0?e.candidates.filter(t=>f.contains(t)):d.filter(t=>f.contains(t)&&f!==t);if(g&&g.length>0){g.forEach(t=>{t!==o&&(o.contains(t)&&o!==t?a:l).push(t)});var w=u.filter(t=>!a.includes(t)),y=g.filter(t=>S(t)&&D(o,t)).map(t=>t.focusableAreas()).flat().filter(t=>t!==o);if(a=a.concat(w).filter(t=>f.contains(t)),(l=l.concat(y).filter(t=>f.contains(t))).length>0&&(l=s(o,t,l,f)),r&&(n=p(o,s(o,t,a,f),t)),a&&a.length>0&&"INPUT"!==o.nodeName&&(n=function(t,e,n){return h(t,e,n,i?U:Y)}(o,a,t)),(n=n||p(o,l,t))&&C(n)){var v=m(n,{mode:"all"}),b=v.length>0?o.spatialNavigationSearch(t,{candidates:v,container:n}):null;b?n=b:R(n)||(g.splice(g.indexOf(n),1),n=g.length?o.spatialNavigationSearch(t,{candidates:g,container:f}):null)}return n}return null}function g(t,e,n,o){var i,a=t.getSpatialNavigationContainer();return void 0===n?e:(i=a.parentElement&&o!==a&&!O(t)?$(a):r||$(t),!S(t)&&"BODY"!==t.nodeName||"INPUT"===t.nodeName?e.filter(e=>{var a=$(e),r="IFRAME"===e.nodeName?e.contentDocument.body:null;return o.contains(e)&&e!==t&&r!==t&&W(a,i,n)&&!F(i,a)}):e.filter(e=>{var a=$(e);return o.contains(e)&&(t.contains(e)&&F(i,a)&&e!==t||W(a,i,n))}))}function p(t,e,n){var o,i,a=t.getSpatialNavigationContainer(),l=getComputedStyle(a).getPropertyValue("--spatial-navigation-function"),u=r||$(t);return"grid"===l?((i=e.filter(t=>L(u,$(t),n))).length>0&&(e=i),o=X):o=j,h(t,e,n,o)}function h(t,e,n,o){var i=null;window.location===window.parent.location||"BODY"!==t.nodeName&&"HTML"!==t.nodeName?i=r||t.getBoundingClientRect():((i=window.frameElement.getBoundingClientRect()).x=0,i.y=0);var a=Number.POSITIVE_INFINITY,l=[];if(e)for(var u=0;u<e.length;u++){var c=o(i,$(e[u]),n);c<a?(a=c,l=[e[u]]):c===a&&l.push(e[u])}return 0===l.length?null:l.length>1&&o===X?h(t,l,n,q):l[0]}function w(){var t=this;do{if(!t.parentElement){t=window.location!==window.parent.location?window.parent.document.documentElement:window.document.documentElement;break}t=t.parentElement}while(!S(t));return t}function y(t){var e=t;do{if(!e.parentElement){e=window.location!==window.parent.location?window.parent.document.documentElement:window.document.documentElement;break}e=e.parentElement}while(!M(e)||!O(e));return e!==document&&e!==document.documentElement||(e=window),e}function v(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{mode:"visible"},e=this.parentElement?this:document.body,n=Array.prototype.filter.call(e.getElementsByTagName("*"),R);return"all"===t.mode?n:n.filter(O)}function b(t,e,n,o){if(["beforefocus","notarget"].includes(t)){var i=new CustomEvent("nav"+t,{bubbles:!0,cancelable:!0,detail:{causedTarget:n,dir:o}});return e.dispatchEvent(i)}}function E(t,e){return(t.style.getPropertyValue(`--${e}`)||"").trim()}function N(t){return E(t,"spatial-navigation-action")||"auto"}function x(t,e,n,o,i){for(var a={candidates:m(e,{mode:i}),container:e};n;){if(c(t.spatialNavigationSearch(o,a),o))return;if("visible"===i&&d(e,o))return;if(!b("notarget",e,t,o))return;e===document||e===document.documentElement?window.location!==window.parent.location&&(e=(t=window.frameElement).ownerDocument.documentElement):e=n,a={candidates:m(e,{mode:i}),container:e};var r=e.getSpatialNavigationContainer();n=r!==e?r:null}a={candidates:m(e,{mode:i}),container:e},!n&&e&&c(t.spatialNavigationSearch(o,a),o)||b("notarget",a.container,t,o)&&("auto"!==N(e)||"visible"!==i||d(e,o))}function P(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(t)switch(e){case"left":t.scrollLeft-=40+n;break;case"right":t.scrollLeft+=40+n;break;case"up":t.scrollTop-=40+n;break;case"down":t.scrollTop+=40+n}}function S(t){return!t.parentElement||"IFRAME"===t.nodeName||M(t)||function(t){return"contain"===E(t,"spatial-navigation-contain")}(t)}function C(t){return"delegable"===E(t,"spatial-navigation-contain")}function M(t){var e=window.getComputedStyle(t,null),n=e.getPropertyValue("overflow-x"),o=e.getPropertyValue("overflow-y");return!!("visible"!==n&&"clip"!==n&&_(t,"left")||"visible"!==o&&"clip"!==o&&_(t,"down"))}function A(t,e){if(t&&"object"===n(t)){if(e&&"string"==typeof e){if(_(t,e)){var o=window.getComputedStyle(t,null),i=o.getPropertyValue("overflow-x"),a=o.getPropertyValue("overflow-y");switch(e){case"left":case"right":return"visible"!==i&&"clip"!==i&&"hidden"!==i;case"up":case"down":return"visible"!==a&&"clip"!==a&&"hidden"!==a}}return!1}return"HTML"===t.nodeName||"BODY"===t.nodeName||M(t)&&_(t)}}function _(t,e){if(t&&"object"===n(t)){if(!e||"string"!=typeof e)return t.scrollWidth>t.clientWidth||t.scrollHeight>t.clientHeight;switch(e){case"left":case"right":return t.scrollWidth>t.clientWidth;case"up":case"down":return t.scrollHeight>t.clientHeight}return!1}}function T(t,e){var n=!1;switch(e){case"left":n=0===t.scrollLeft;break;case"right":n=t.scrollWidth-t.scrollLeft-t.clientWidth===0;break;case"up":n=0===t.scrollTop;break;case"down":n=t.scrollHeight-t.scrollTop-t.clientHeight===0}return n}function k(t,e){if(A(t,e)){var n=t.scrollTop,o=t.scrollLeft,i=t.scrollHeight-t.clientHeight,a=t.scrollWidth-t.clientWidth;switch(e){case"left":return 0===o;case"right":return Math.abs(o-a)<=1;case"up":return 0===n;case"down":return Math.abs(n-i)<=1}}return!1}function I(t){var e=t.getBoundingClientRect(),n=y(t),o=null;return!(!F(o=n!==window?$(n):new DOMRect(0,0,window.innerWidth,window.innerHeight),e)||!F(o,e))}function R(t){return!(t.tabIndex<0||function(t){return"A"===t.tagName&&null===t.getAttribute("href")&&null===t.getAttribute("tabIndex")}(t)||function(t){return!!["BUTTON","INPUT","SELECT","TEXTAREA","OPTGROUP","OPTION","FIELDSET"].includes(t.tagName)&&t.disabled}(t)||function(t){return t.inert&&!t.ownerDocument.documentElement.inert}(t)||!function(t){return!!V(t.parentElement)&&!(!V(t)||"0"===t.style.opacity||"0px"===window.getComputedStyle(t).height||"0px"===window.getComputedStyle(t).width)}(t))&&(!!(!t.parentElement||A(t)&&_(t)||t.tabIndex>=0)||void 0)}function O(t){return!t.parentElement||V(t)&&function(t){var e=$(t);if("IFRAME"!==t.nodeName&&(e.top<0||e.left<0||e.top>t.ownerDocument.documentElement.clientHeight||e.left>t.ownerDocument.documentElement.clientWidth))return!1;var n=parseInt(t.offsetWidth)/10,o=parseInt(t.offsetHeight)/10;n=isNaN(n)?1:n,o=isNaN(o)?1:o;var i={middle:[(e.left+e.right)/2,(e.top+e.bottom)/2],leftTop:[e.left+n,e.top+o],rightBottom:[e.right-n,e.bottom-o]};for(var a in i){var r=t.ownerDocument.elementFromPoint(...i[a]);if(t===r||t.contains(r))return!0}return!1}(t)}function D(t,e){var n=$(t),o=$(e||t.getSpatialNavigationContainer());return!(n.left<o.left||n.right>o.right||n.top<o.top||n.bottom>o.bottom)}function V(t){var e=window.getComputedStyle(t,null),n=e.getPropertyValue("visibility");return"none"!==e.getPropertyValue("display")&&!["hidden","collapse"].includes(n)}function F(t,e){var n=t.left<=e.right&&t.right>=e.right,o=t.left<=e.left&&t.right>=e.left,i=t.top<=e.top&&t.bottom>=e.top,a=t.top<=e.bottom&&t.bottom>=e.bottom;return(n||o)&&(i||a)}function W(t,e,n){switch(n){case"left":return B(e,t);case"right":return B(t,e);case"up":return H(e,t);case"down":return H(t,e);default:return!1}}function B(t,e){return t.left>=e.right||t.left>=e.left&&t.right>e.right&&t.bottom>e.top&&t.top<e.bottom}function H(t,e){return t.top>=e.bottom||t.top>=e.top&&t.bottom>e.bottom&&t.left<e.right&&t.right>e.left}function L(t,e,n){switch(n){case"left":case"right":return t.bottom>e.top&&t.top<e.bottom;case"up":case"down":return t.right>e.left&&t.left<e.right;default:return!1}}function U(t,e,n){var o=K(n,i,e),a=Math.abs(o.entryPoint.x-o.exitPoint.x),r=Math.abs(o.entryPoint.y-o.exitPoint.y);return Math.sqrt(Math.pow(a,2)+Math.pow(r,2))}function Y(t,e,n){var o={left:"right",right:"left",up:"bottom",down:"top"}[n];return Math.abs(t[o]-e[o])}function j(t,e,n){var o,i,a,r,l,u,c,d=0,m=0,s=K(n,t,e),f=Math.abs(s.entryPoint.x-s.exitPoint.x),g=Math.abs(s.entryPoint.y-s.exitPoint.y),p=Math.sqrt(Math.pow(f,2)+Math.pow(g,2)),h=(a=t,r=e,l={width:0,height:0,area:0},u=[Math.max(a.left,r.left),Math.max(a.top,r.top)],c=[Math.min(a.right,r.right),Math.min(a.bottom,r.bottom)],l.width=Math.abs(u[0]-c[0]),l.height=Math.abs(u[1]-c[1]),u[0]>=c[0]||u[1]>=c[1]||(l.area=Math.sqrt(l.width*l.height)),l),w=h.area;switch(n){case"left":case"right":L(t,e,n)?m=Math.min(h.height/t.height,1):d=t.height/2,o=30*(g+d),i=5*m;break;case"up":case"down":L(t,e,n)?m=Math.min(h.width/t.width,1):d=t.width/2,o=2*(f+d),i=5*m;break;default:o=0,i=0}return p+o-i-w}function q(t,e,n){var o=K(n,t,e),i=Math.abs(o.entryPoint.x-o.exitPoint.x),a=Math.abs(o.entryPoint.y-o.exitPoint.y);return Math.sqrt(Math.pow(i,2)+Math.pow(a,2))}function X(t,e,n){var o=K(n,t,e);return"left"===n||"right"===n?Math.abs(o.entryPoint.x-o.exitPoint.x):Math.abs(o.entryPoint.y-o.exitPoint.y)}function K(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"down",e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,o={entryPoint:{x:0,y:0},exitPoint:{x:0,y:0}};if(i){switch(o.exitPoint=e,t){case"left":o.entryPoint.x=n.right;break;case"up":o.entryPoint.y=n.bottom;break;case"right":o.entryPoint.x=n.left;break;case"down":o.entryPoint.y=n.top}switch(t){case"left":case"right":i.y<=n.top?o.entryPoint.y=n.top:i.y<n.bottom?o.entryPoint.y=i.y:o.entryPoint.y=n.bottom;break;case"up":case"down":i.x<=n.left?o.entryPoint.x=n.left:i.x<n.right?o.entryPoint.x=i.x:o.entryPoint.x=n.right}}else{switch(t){case"left":o.exitPoint.x=e.left,o.entryPoint.x=n.right<e.left?n.right:e.left;break;case"up":o.exitPoint.y=e.top,o.entryPoint.y=n.bottom<e.top?n.bottom:e.top;break;case"right":o.exitPoint.x=e.right,o.entryPoint.x=n.left>e.right?n.left:e.right;break;case"down":o.exitPoint.y=e.bottom,o.entryPoint.y=n.top>e.bottom?n.top:e.bottom}switch(t){case"left":case"right":H(e,n)?(o.exitPoint.y=e.top,o.entryPoint.y=n.bottom<e.top?n.bottom:e.top):H(n,e)?(o.exitPoint.y=e.bottom,o.entryPoint.y=n.top>e.bottom?n.top:e.bottom):(o.exitPoint.y=Math.max(e.top,n.top),o.entryPoint.y=o.exitPoint.y);break;case"up":case"down":B(e,n)?(o.exitPoint.x=e.left,o.entryPoint.x=n.right<e.left?n.right:e.left):B(n,e)?(o.exitPoint.x=e.right,o.entryPoint.x=n.left>e.right?n.left:e.right):(o.exitPoint.x=Math.max(e.left,n.left),o.entryPoint.x=o.exitPoint.x)}}return o}function $(t){var e=o&&o.get(t);if(!e){var n=t.getBoundingClientRect();e={top:Number(n.top.toFixed(2)),right:Number(n.right.toFixed(2)),bottom:Number(n.bottom.toFixed(2)),left:Number(n.left.toFixed(2)),width:Number(n.width.toFixed(2)),height:Number(n.height.toFixed(2))},o&&o.set(t,e)}return e}function G(t){var e=window.__spatialNavigation__&&window.__spatialNavigation__.keyMode;window.__spatialNavigation__=!1===t?z():Object.assign(z(),function(){function t(t,e){return A(t,e)&&!k(t,e)||!t.parentElement&&!T(t,e)}function e(e,n,o,i){var a=n,r=null;if(a!==document&&a!==document.documentElement||(a=document.body||document.documentElement),(S(a)||"BODY"===a.nodeName)&&"INPUT"!==a.nodeName){"IFRAME"===a.nodeName&&(a=a.contentDocument.body);var l=m(a,i);if(Array.isArray(l)&&l.length>0)return e?s(a,o,l):a.spatialNavigationSearch(o,{candidates:l});if(t(a,o))return e?[]:a}var u=a.getSpatialNavigationContainer(),c=u.parentElement?u.getSpatialNavigationContainer():null;for(c||window.location===window.parent.location||(c=window.parent.document.documentElement);c;){var d=g(a,m(u,i),o,u);if(Array.isArray(d)&&d.length>0){if(r=a.spatialNavigationSearch(o,{candidates:d,container:u}))return e?d:r}else{if(t(u,o))return e?[]:a;if(u===document||u===document.documentElement){if(u=window.document.documentElement,window.location!==window.parent.location){if(a=window.frameElement,!(u=window.parent.document.documentElement).parentElement){c=null;break}c=u.getSpatialNavigationContainer()}}else{if(R(u)&&(a=u),!(u=c).parentElement){c=null;break}c=u.getSpatialNavigationContainer()}}}if(!c&&u){var f=g(a,m(u,i),o,u);if(Array.isArray(f)&&f.length>0&&(r=a.spatialNavigationSearch(o,{candidates:f,container:u})))return e?f:r}if(t(u,o))return a}return{isContainer:S,isScrollContainer:M,isVisibleInScroller:I,findCandidates:e.bind(null,!0),findNextTarget:e.bind(null,!1),getDistanceFromTarget:(t,e,n)=>(S(t)||"BODY"===t.nodeName)&&"INPUT"!==t.nodeName&&m(t).includes(e)?Y($(t),$(e),n):j($(t),$(e),n)}}()),window.__spatialNavigation__.keyMode=e,Object.seal(window.__spatialNavigation__)}function z(){return{enableExperimentalAPIs:G,get keyMode(){return this._keymode?this._keymode:"ARROW"},set keyMode(t){this._keymode=["SHIFTARROW","ARROW","NONE"].includes(t)?t:"ARROW"},setStartingPoint:function(t,e){i=t&&e?{x:t,y:e}:null}}}}()),console.log("MiruroTV loaded - TV remote navigation enabled"),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",i):i()}();
